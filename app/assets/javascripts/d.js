function loadMoreComments(t,a){var r="";"helpful"==a?(r=$("#helpful_reviews"),div_button=$("#helpful_load_more")):(r=$("#recent_reviews"),div_button=$("#recent_load_more")),index=r.children().length-1,full_url="/"+t.toLowerCase()+"/getmore?type=recent&index="+index.toString(),$.get(full_url,function(t){(""==t||0==t.length)&&alert("No More reviews :'(");for(var a=0;a<t.length;a++){e=t[a],html='<div class="recent-review"><p class="review-helpful-rank">'+e.found_helpful+" of "+e.found_total+" people found the following helpful</p>";for(var l=0;l<e.rating;l++)html+='<i class="fa fa-star"></i>';if(0!=e.rating){for(var l=0;l<5-e.rating;l++)html+='<i class="fa fa-star-o"></i>';html+="&nbsp;"}html+=e.grade,html+='<p class="review-date">Published '+jQuery.timeago(e.written_on)+' ago</p><p class="review-info">',e.quarter_taken.length>0&&(html+="Taken"+e.quarter_taken+'<span class="separator">|</span>'),e.professor_taken_with.length>0&&(html+="Professor: "+e.professor_taken_with),html+='</p><p class="helpful-review-text">',body_parts=e.body.split("XXX");for(var l=0;l<body_parts.length;l++)html+=body_parts[l],html+="<br/>";html+="</p></div>",r.append(html)}t.length<15&&div_button.hide()})}function setUpGradeDistribution(){if(!$("#gradeChart").length)return void console.log("quitting");c=$("#gradeChart"),ctx=c.get(0).getContext("2d");new Chart(ctx);grade_distr=$("#gradeDistribution").html().split(","),a=new Array,labels=new Array;for(var e=0;e<grade_distr.length;e++)0!=grade_distr[e].length&&(datapts=grade_distr[e].split(":"),labels.push(datapts[0]),a.push(parseInt(datapts[1])));new_labels=["A+","A","A-","B+","B","B-","C+","C","C-","D","F","CR","NC"],new_data=new Array(new_labels.length);for(var e=0;e<labels.length;e++){var t=labels.indexOf(new_labels[e]);-1!=t&&(new_data[e]=a[t])}var a={labels:new_labels,datasets:[{label:"My First dataset",fillColor:"rgba(238,52,24,1)",strokeColor:"rgba(238,52,24,1)",highlightFill:"rgba(0,0,0,1)",highlightStroke:"rgba(0,0,0,1)",data:new_data}]},r={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,scaleFontSize:16,responsive:!0,maintainAspectRatio:!0,showTooltips:!1,barStrokeWidth:1,barValueSpacing:4,barDatasetSpacing:1,animation:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].lineColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};c.attr("width","300"),c.attr("height","280"),myNewChart=new Chart(ctx).Bar(a,r)}$(document).ready(function(){setUpGradeDistribution()});